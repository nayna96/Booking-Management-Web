{% extends "settings/settings_base.html" %}

{% block content %}
{% load static %}
<h3>ORGANISATION MASTER</h3>

<button onclick="show_modal()" class="btn btn-primary">Add</button>

<div id="myModal" class="_modal">
    <div class="_modal-content">        
        <span class="_close">&times;</span>
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">ORGANISATION MASTER</h5>            
        </div>
        <div class="modal-body">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" data-toggle="tab" href="#organisation_info" type="button" role="tab" aria-selected="true">Organisation</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" data-toggle="tab" href="#personal_details" id="details_tab" type="button" role="tab" aria-selected="true">Details</button>
                </li>
                <li class="nav-item Private_Limited_Company" role="presentation" style="display: none;">
                    <button class="nav-link" data-toggle="tab" href="#promoter_details" type="button" role="tab" aria-selected="true">Promoter's Details</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" data-toggle="tab" href="#docs" type="button" role="tab" aria-selected="true">Doc Upload</button>
                </li>
            </ul>
            <div class="tab-content">
                <div id="organisation_info" class="tab-pane fade in active show">
                    <form method="POST" id="form" enctype="multipart/form-data">
                    {% csrf_token %} 
                    <input type="text" name="_id" id="_id" hidden>
                    <div class="row" hidden>
                        <div class="col-sm-1 mb-1" style="border: 1px solid;">
                            <input type="text" class="form-control" value="1">
                        </div>
                        <div class="col-sm-1 mb-1" style="border: 1px solid;">
                            <input type="text" class="form-control" value="2">
                        </div>
                        <div class="col-sm-1 mb-1" style="border: 1px solid;">
                            <input type="text" class="form-control" value="3">
                        </div>
                        <div class="col-sm-1 mb-1" style="border: 1px solid;">
                            <input type="text" class="form-control" value="4">
                        </div>
                        <div class="col-sm-1 mb-1" style="border: 1px solid;">
                            <input type="text" class="form-control" value="5">
                        </div>
                        <div class="col-sm-1 mb-1" style="border: 1px solid;">
                            <input type="text" class="form-control" value="6">
                        </div>
                        <div class="col-sm-1 mb-1" style="border: 1px solid;">
                            <input type="text" class="form-control" value="7">
                        </div>
                        <div class="col-sm-1 mb-1" style="border: 1px solid;">
                            <input type="text" class="form-control" value="8">
                        </div>
                        <div class="col-sm-1 mb-1" style="border: 1px solid;">
                            <input type="text" class="form-control" value="9">
                        </div>
                        <div class="col-sm-1 mb-1" style="border: 1px solid;">
                            <input type="text" class="form-control" value="10">
                        </div>
                        <div class="col-sm-1 mb-1" style="border: 1px solid;">
                            <input type="text" class="form-control" value="11">
                        </div>
                        <div class="col-sm-1 mb-1" style="border: 1px solid;">
                            <input type="text" class="form-control" value="12">
                        </div>
                    </div>
                    <div class="acc_title" onclick="AccFunc('organisationDetails')">
                        Organisation Details 
                        <i class="fa fa-caret-down"></i>
                    </div>
                    <div id="organisationDetails" class="w3-show">
                        <div class="row">
                            <div class="col-sm-3 mb-1">
                                <label>Organisation Name</label>
                                <label class="mandat_symbol">*</label>
                                <input type="text" name="organisation_name" id="organisation_name" class="allstring form-control" tabindex="1" required>
                            </div>
                            <div class="col-sm-3 mb-1">
                                <label>Estd. On</label>
                                <label class="mandat_symbol">*</label>
                                <input type="date" name="estd_on" id="estd_on" class="form-control" tabindex="2" required>
                            </div>
                            <div class="col-sm-3 mb-1">
                                <label>Branch (if any)</label>
                                <label class="mandat_symbol">*</label>
                                <select name="branch" id="branch" class="form-control" tabindex="3" required>
                                    <option value="" selected disabled>-- Select --</option>
                                    <option value="Yes">Yes</option>
                                    <option value="No">No</option>
                                </select>
                            </div>
                            <div class="col-sm-3 mb-1">
                                <label>Constitution</label>
                                <label class="mandat_symbol">*</label>
                                <select name="constitution" id="constitution" class="form-control" onchange="showLegalDetails(event)" tabindex="4" required>
                                    <option value="" selected disabled>-- Select --</option>
                                    <option value="Proprietorship">Proprietorship</option>
                                    <option value="Partnership">Partnership</option>
                                    <option value="LLP">LLP</option>
                                    <option value="Private Limited Company">Private Limited Company</option>
                                </select>
                            </div>
                            <div class="col-sm-3 mb-1 Partnership_LLP" style="display: none;">
                                <label>Number of partners</label>
                                <label class="mandat_symbol">*</label>
                                <input type="number" name="no_partners" id="no_partners" onchange="cloneDetails('no_partners', ['partner\'s_details', 'partner\'s_docs'])" class="form-control" tabindex="5">
                            </div>
                            <div class="col-sm-3 mb-1 Private_Limited_Company" style="display: none;">
                                <label>No of directors</label>
                                <label class="mandat_symbol">*</label>
                                <input type="number" name="no_directors" id="no_directors" onchange="cloneDetails('no_directors', ['director\'s_details', 'director\'s_docs'])" class="form-control" tabindex="5">
                            </div>
                            <div class="col-sm-3 mb-1 Private_Limited_Company" style="display: none;">
                                <label>No of promoters</label>
                                <label class="mandat_symbol">*</label>
                                <input type="number" name="no_promoters" id="no_promoters" onchange="cloneDetails('no_promoters', ['promoter\'s_details', 'promoter\'s_docs'])" class="form-control" tabindex="5">
                            </div>
                            <div class="col-sm-3 mb-1">
                                <label>Nature of Business</label>
                                <label class="mandat_symbol">*</label>
                                <select name="nature_of_business" id="nature_of_business" class="form-control" tabindex="6" required>
                                    <option value="" selected disabled>-- Select --</option>
                                    <option value="WHOLESALER">WHOLESALER</option>
                                    <option value="RETAILER">RETAILER</option>
                                    <option value="REAL ESTATE">REAL ESTATE</option>
                                </select>
                            </div>
                            <div class="col-sm-3 mb-1">
                                <label>Starting Financial Year</label>
                                <label class="mandat_symbol">*</label>
                                <input type="date" name="start_fin_yr" id="start_fin_yr" class="form-control" tabindex="7" required>
                            </div>
                            <div class="col-sm-3 mb-1">
                                <label>Enable TDS Deduction</label>
                                <label class="mandat_symbol">*</label>
                                <select name="enable_tds_deduction" id="enable_tds_deduction" class="form-control" tabindex="8" required>
                                    <option value="" selected disabled>-- Select --</option>
                                    <option value="Yes">Yes</option>
                                    <option value="No">No</option>
                                </select>
                            </div>
                            <div class="col-sm-3 mb-1">
                                <label>TDS Deduction Type</label>
                                <label class="mandat_symbol">*</label>
            
                                <select name="tds_deduction_type" id="tds_deduction_type" class="form-control" tabindex="9" required>
                                    <option value="" selected disabled>-- Select --</option>
                                    <option value="Company">Company</option>
                                    <option value="Non-Company">Non-Company</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="acc_title" onclick="AccFunc('addressDetails')">
                        Address Details 
                        <i class="fa fa-caret-down"></i>
                    </div>
                    <div id="addressDetails" class="w3-show">
                        <div class="row">
                            <div class="col-sm-4 mb-1">
                                <label>Address Line 1</label>
                                <label class="mandat_symbol">*</label>
                                <input type="text" name="addLine1" id="addLine1" class="allcaps form-control" tabindex="10" required>
                            </div>
                            <div class="col-sm-4 mb-1">
                                <label>Address Line 2</label>
                                <input type="text" name="addLine2" id="addLine2" class="allcaps form-control" tabindex="11">
                            </div>
                            <div class="col-sm-4 mb-1">
                                <label>City</label>
                                <label class="mandat_symbol">*</label>
                                <input type="text" name="city" id="city" class="allstring form-control" tabindex="12" required>
                            </div>
                            <div class="col-sm-4 mb-1">
                                <label>District</label>
                                <label class="mandat_symbol">*</label>
                                <input type="text" name="district" id="district" class="allstring form-control" tabindex="13" required>
                            </div>
                            <div class="col-sm-4 mb-1">
                                <label>State</label>
                                <label class="mandat_symbol">*</label>
                                <input type="text" name="state" id="state" class="allstring form-control" tabindex="14" required>
                            </div>
                            <div class="col-sm-4 mb-1">
                                <label>Pin code</label>
                                <label class="mandat_symbol">*</label>
                                <input type="text" name="pin" id="pin" maxlength="6" minlength="6" class="allnums form-control" tabindex="15" required>
                            </div>
                        </div>
                    </div>
                    <div class="acc_title" onclick="AccFunc('contactDetails')">
                        Contact Details 
                        <i class="fa fa-caret-down"></i>
                    </div>
                    <div id="contactDetails" class="w3-show">
                        <div class="row">
                            <div class="col-sm-3 mb-1">
                                <label>Mobile No</label>
                                <label class="mandat_symbol">*</label>
                                <input type="text" name="mobile_no" id="mobile_no" class="allnums form-control" maxlength="10" tabindex="16" required>
                            </div>
                            <div class="col-sm-3 mb-1">
                                <label>Whatsapp No.</label>
                                <label class="mandat_symbol">*</label>
                                <input type="text" name="whatsapp_no" id="whatsapp_no" class="allnums form-control" maxlength="10" tabindex="17" required>
                            </div>
                            <div class="col-sm-3 mb-1">
                                <label>Email ID</label>
                                <label class="mandat_symbol">*</label>
                                <input type="email" name="email" id="email" class="allsmall form-control" tabindex="18" required>
                            </div>
                        </div>
                    </div>
                    <div class="acc_title" onclick="AccFunc('licenseDetails')">
                        License Details
                        <i class="fa fa-caret-down"></i>
                    </div>                    
                    <div id="licenseDetails" class="w3-show">                        
                        <div class="row">
                            <div class="col-sm-4 mb-1">
                                <label>PAN No.</label>
                                <label class="mandat_symbol">*</label>
                                <input type="text" name="pan_no" id="pan_no" class="allcaps form-control" maxlength="10" tabindex="19" required onchange="copyToDoc(event)">
                            </div>
                            <div class="col-sm-4 mb-1">
                                <label>TAN No.</label>
                                <label class="mandat_symbol">*</label>
                                <input type="text" name="tan_no" id="tan_no" class="allcaps form-control" maxlength="10" tabindex="20" required onchange="copyToDoc(event)">
                            </div>
                            <div class="col-sm-4 mb-1">
                                <label>GSTIN No.</label>
                                <label class="mandat_symbol">*</label>
                                <input type="text" name="gstin_no" id="gstin_no" class="allcaps form-control" maxlength="15" tabindex="21" required onchange="copyToDoc(event)">
                            </div>                            
                        </div>
                        <div class="row Private_Limited_Company" style="display: none;">                            
                            <div class="col-sm-3 mb-1">
                                <label>CIN No.</label>
                                <label class="mandat_symbol">*</label>
                                <input type="text" name="cin_no" id="cin_no" maxlength="21" class="allcaps form-control" tabindex="22" onchange="copyToDoc(event)">
                            </div>                            
                        </div>
                    </div>
                </div>
                <div id="personal_details" class="tab-pane fade">
                    <div class="row Proprietorship" style="display: none;">
                        <div class="row">
                            <div class="col-sm-10 mb-1">
                                <div class="row">
                                    <div class="col-sm-6 mb-1">
                                        <label>Proprietor's Name</label>
                                        <label class="mandat_symbol">*</label>
                                        <input type="text" name="proprietors's_name" id="proprietors's_name" class="allstring form-control" tabindex="1">
                                    </div>
                                    <div class="col-sm-6 mb-1">
                                        <label>Father's name</label>
                                        <label class="mandat_symbol">*</label>
                                        <input type="text" name="p_father's_name" id="p_father's_name" class="allstring form-control" tabindex="2">
                                    </div>                                   
                                    <div class="col-sm-6 mb-1">
                                        <label>Address Line 1</label>
                                        <label class="mandat_symbol">*</label>
                                        <input type="text" name="p_addLine1" id="p_addLine1" class="allcaps form-control" tabindex="3">
                                    </div>
                                    <div class="col-sm-6 mb-1">
                                        <label>Address Line 2</label>
                                        <input type="text" name="p_addLine2" id="p_addLine2" class="allcaps form-control" tabindex="4">
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <label>City</label>
                                        <label class="mandat_symbol">*</label>
                                        <input type="text" name="p_city" id="p_city" class="allstring form-control" tabindex="5">
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <label>District</label>
                                        <label class="mandat_symbol">*</label>
                                        <input type="text" name="p_district" id="p_district" class="allstring form-control" tabindex="6">
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <label>State</label>
                                        <label class="mandat_symbol">*</label>
                                        <input type="text" name="p_state" id="p_state" class="allstring form-control" tabindex="7">
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <label>Pin code</label>
                                        <label class="mandat_symbol">*</label>
                                        <input type="text" name="p_pin" id="p_pin" maxlength="6" minlength="6" class="allnums form-control" tabindex="8">
                                    </div>                    
                                    <!--<div class="col-sm-4 mb-1">
                                        <label>FSSI LICENSE No.</label>
                                        <label class="mandat_symbol">*</label>
                                        <input type="text" name="" id="" class="allstring form-control" tabindex="1" required>
                                    </div>
                                    <div class="col-sm-4 mb-1">
                                        <label>FSSI LICENSE Valid from</label>
                                        <label class="mandat_symbol">*</label>
                                        <input type="date" name="" id="" class="form-control" tabindex="1" required>
                                    </div>
                                    <div class="col-sm-4 mb-1">
                                        <label>FSSI LICENSE Valid upto</label>
                                        <label class="mandat_symbol">*</label>
                                        <input type="date" name="" id="" class="form-control" tabindex="1" required>
                                    </div>-->
                                    <div class="col-sm-3 mb-1">
                                        <label>Aadhar No.</label>
                                        <label class="mandat_symbol">*</label>
                                        <input type="text" name="p_aadhar_no" id="p_aadhar_no" maxlength="12" class="allnums form-control" tabindex="9" onchange="copyToDoc(event)">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-2 mb-1"> 
                                <div>                                
                                    <img id="pic" src="#" style="width: 193px; height: 193px;" alt="passport_photo"/>
                                    <input type="file"> 
                                </div>
                            </div>
                        </div>                              
                    </div>
                    <div class="Partnership_LLP" style="display: none;">                    
                        <div class="partner's_details fs1" id="fs1-0">
                            <label style="font-weight: bold;">Partner 1</label>
                            <div class="row">                         
                                <div class="col-sm-10 mb-1">
                                    <div class="row">
                                        <div class="col-sm-6 mb-1">
                                            <label>Partner's Name</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs1-0-partner's_name" id="fs1-0-partner's_name" class="allstring form-control" tabindex="1">
                                        </div>
                                        <div class="col-sm-6 mb-1">
                                            <label>Father's name</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs1-0-pa_father's_name" id="fs1-0-pa_father's_name" class="allstring form-control" tabindex="2">
                                        </div>
                                        <div class="col-sm-6 mb-1">
                                            <label>Address Line 1</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs1-0-pa_addLine1" id="fs1-0-pa_addLine1" class="allcaps form-control" tabindex="3">
                                        </div>
                                        <div class="col-sm-6 mb-1">
                                            <label>Address Line 2</label>
                                            <input type="text" name="fs1-0-pa_addLine2" id="fs1-0-pa_addLine2" class="allcaps form-control" tabindex="4">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>City</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs1-0-pa_city" id="fs1-0-pa_city" class="allstring form-control" tabindex="5">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>District</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs1-0-pa_district" id="fs1-0-pa_district" class="allstring form-control" tabindex="6">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>State</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs1-0-pa_state" id="fs1-0-pa_state" class="allstring form-control" tabindex="7">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>Pin code</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs1-0-pa_pin" id="fs1-0-pa_pin" maxlength="6" minlength="6" class="allnums form-control" tabindex="8">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>PAN No.</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs1-0-pa_pan_no" id="fs1-0-pa_pan_no" maxlength="10" class="allcaps form-control" tabindex="9" onchange="copyToDoc(event)">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>Aadhar No.</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs1-0-pa_aadhar_no" id="fs1-0-pa_aadhar_no" maxlength="12" class="allnums form-control" tabindex="10" onchange="copyToDoc(event)">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>Percent of Interest</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs1-0-pa_interest_pct" id="fs1-0-pa_interest_pct" class="allcaps form-control" tabindex="11">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2 mb-1"> 
                                    <div>                                
                                        <img id="pic" src="#" style="width: 193px; height: 193px;" alt="passport_photo"/>
                                        <input type="file"> 
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row Private_Limited_Company" style="display: none;">
                        <div class="director's_details fs2" id="fs2-0">
                            <label style="font-weight: bold;">Director 1</label>
                            <div class="row">                         
                                <div class="col-sm-10 mb-1">
                                    <div class="row">
                                        <div class="col-sm-6 mb-1">
                                            <label>Director's Name</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs2-0-director's_name" id="fs2-0-director's_name" class="allstring form-control" tabindex="1">
                                        </div>
                                        <div class="col-sm-6 mb-1">
                                            <label>Father's name</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs2-0-d_father's_name" id="fs2-0-d_father's_name" class="allstring form-control" tabindex="2">
                                        </div>
                                        <div class="col-sm-6 mb-1">
                                            <label>Address Line 1</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs2-0-d_addLine1" id="fs2-0-d_addLine1" class="allcaps form-control" tabindex="3">
                                        </div>
                                        <div class="col-sm-6 mb-1">
                                            <label>Address Line 2</label>
                                            <input type="text" name="fs2-0-d_addLine2" id="fs2-0-d_addLine2" class="allcaps form-control" tabindex="4">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>City</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs2-0-d_city" id="fs2-0-d_city" class="allstring form-control" tabindex="5">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>District</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs2-0-d_district" id="fs2-0-d_district" class="allstring form-control" tabindex="6">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>State</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs2-0-d_state" id="fs2-0-d_state" class="allstring form-control" tabindex="7">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>Pin code</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs2-0-d_pin" id="fs2-0-d_pin" maxlength="6" minlength="6" class="allnums form-control" tabindex="8">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>PAN No.</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs2-0-d_pan_no" id="fs2-0-d_pan_no" maxlength="10" class="allcaps form-control" tabindex="9" onchange="copyToDoc(event)">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>Aadhar No.</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs2-0-d_aadhar_no" id="fs2-0-d_aadhar_no" maxlength="12" class="allnums form-control" tabindex="10" onchange="copyToDoc(event)">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>Director Type</label>
                                            <label class="mandat_symbol">*</label>
                                            <select name="fs2-0-d_director_type" id="fs2-0-d_director_type" class="form-control" tabindex="11">
                                                <option value="" selected disabled>-- Select --</option>
                                                <option value="MANAGING DIRECTOR">Managing Director</option>
                                                <option value="EXECUTIVE DIRECTOR">Executivr Director</option>
                                            </select>
                                            <!-- to be data list -->
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>DIN No.</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs2-0-d_din_no" id="fs2-0-d_din_no" maxlength="8" class="allcaps form-control" tabindex="12" onchange="copyToDoc(event)">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>Valid upto</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="date" name="fs2-0-d_valid_upto" id="fs2-0-d_valid_upto" class="form-control" tabindex="13">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2 mb-1"> 
                                    <div>                                
                                        <img id="pic" src="#" style="width: 193px; height: 193px;" alt="passport_photo"/>
                                        <input type="file"> 
                                    </div>
                                </div>
                            </div>
                        </div>                        
                    </div>
                </div>
                <div id="promoter_details" class="tab-pane fade">
                    <div class="row Private_Limited_Company" style="display: none;">
                        <div class="promoter's_details fs3" id="fs3-0">
                            <label style="font-weight: bold;">Promoter 1</label>
                            <div class="row">                         
                                <div class="col-sm-10 mb-1">
                                    <div class="row">
                                        <div class="col-sm-6 mb-1">
                                            <label>Promoter's Name</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs3-0-promoter's_name" id="fs3-0-promoter's_name" class="allstring form-control" tabindex="1">
                                        </div>
                                        <div class="col-sm-6 mb-1">
                                            <label>Father's name</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs3-0-pr_father's_name" id="fs3-0-pr_father's_name" class="allstring form-control" tabindex="2">
                                        </div>
                                        <div class="col-sm-6 mb-1">
                                            <label>Address Line 1</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs3-0-pr_addLine1" id="fs3-0-pr_addLine1" class="allcaps form-control" tabindex="3">
                                        </div>
                                        <div class="col-sm-6 mb-1">
                                            <label>Address Line 2</label>
                                            <input type="text" name="fs3-0-pr_addLine2" id="fs3-0-pr_addLine2" class="allcaps form-control" tabindex="4">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>City</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs3-0-pr_city" id="fs3-0-pr_city" class="allstring form-control" tabindex="5">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>District</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs3-0-pr_district" id="fs3-0-pr_district" class="allstring form-control" tabindex="6">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>State</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs3-0-pr_state" id="fs3-0-pr_state" class="allstring form-control" tabindex="7">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>Pin code</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs3-0-pr_pin" id="fs3-0-pr_pin" maxlength="6" class="allnums form-control" tabindex="8">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>PAN No.</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs3-0-pr_pan_no" id="fs3-0-pr_pan_no" maxlength="10" class="allcaps form-control" tabindex="9" onchange="copyToDoc(event)">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>Aadhar No.</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs3-0-pr_aadhar_no" id="fs3-0-pr_aadhar_no" maxlength="12" class="allnums form-control" tabindex="10" onchange="copyToDoc(event)">
                                        </div>                                        
                                        <div class="col-sm-3 mb-1">
                                            <label>DIN No.</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs3-0-pr_din_no" id="fs3-0-pr_din_no" maxlength="8" class="allcaps form-control" tabindex="11" onchange="copyToDoc(event)">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>Valid upto</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="date" name="fs3-0-pr_valid_upto" id="fs3-0-pr_valid_upto" class="form-control" tabindex="12">
                                        </div>
                                        <div class="col-sm-3 mb-1">
                                            <label>Number/Percent of Share</label>
                                            <label class="mandat_symbol">*</label>
                                            <input type="text" name="fs3-0-pr_pct_share" id="fs3-0-pr_pct_share" class="allcaps form-control" tabindex="13">                                            
                                            <!-- to be data list -->
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2 mb-1"> 
                                    <div>                                
                                        <img id="pic" src="#" style="width: 193px; height: 193px;" alt="passport_photo"/>
                                        <input type="file"> 
                                    </div>
                                </div>
                            </div>
                        </div>                        
                    </div>
                </div>                                    
                <div id="docs" class="tab-pane fade">                   
                    <div class="row">
                        <div class="col-sm-3 mb-1">
                            <label style="font-weight: bold;">Doc Type</label>
                        </div>
                        <div class="col-sm-3 mb-1">
                            <label style="font-weight: bold;">Doc No.</label>
                        </div>
                        <div class="col-sm-3 mb-1">
                            <label style="font-weight: bold;">Upload</label>
                        </div>
                        <div class="col-sm-3 mb-1">
                            <label style="font-weight: bold;">Files</label>
                        </div>
                        <div class="col-sm-3 mb-1">
                            <label>PAN No.</label>
                        </div>
                        <div class="col-sm-3 mb-1">
                            <input type="text" id="_pan_no" disabled class="form-control"/> 
                        </div>
                        <div class="col-sm-3 mb-1">
                            <input type="file" name="pan_card" id="pan_card" class="file" onchange="updateTable('pan_card', 'panCard', false)"/>
                        </div>
                        <div class="col-sm-3 mb-1">
                            <table id="panCard" class="table filesList">
                            </table>
                        </div>
                        <div class="col-sm-3 mb-1">
                            <label>TAN No.</label>
                        </div>
                        <div class="col-sm-3 mb-1">
                            <input type="text" id="_tan_no" disabled class="form-control"/> 
                        </div>
                        <div class="col-sm-3 mb-1">
                            <input type="file" name="tan_doc" id="tan_doc" class="file" onchange="updateTable('tan_doc', 'tanDoc', false)"/>
                        </div>
                        <div class="col-sm-3 mb-1">
                            <table id="tanDoc" class="table filesList">
                            </table>
                        </div>    
                        <div class="col-sm-3 mb-1">
                            <label>GSTIN No.</label>
                        </div>
                        <div class="col-sm-3 mb-1">
                            <input type="text" id="_gstin_no" disabled class="form-control"/> 
                        </div>
                        <div class="col-sm-3 mb-1">
                            <input type="file" name="gst_doc" id="gst_doc" class="file" onchange="updateTable('gst_doc', 'gstDoc', false)"/>
                        </div>
                        <div class="col-sm-3 mb-1">
                            <table id="gstDoc" class="table filesList">
                            </table>
                        </div>
                    </div>           
                    <div class="Proprietorship row" style="display: none;">
                        <div class="col-sm-3 mb-1">
                            <label>Aadhar No.</label>
                        </div>
                        <div class="col-sm-3 mb-1">
                            <input type="text" id="_p_aadhar_no" disabled class="form-control"/> 
                        </div>
                        <div class="col-sm-3 mb-1">
                            <input type="file" name="p_aadhar_card" id="p_aadhar_card" class="file" onchange="updateTable('p_aadhar_card', 'p_aadharCard', false)"/>
                        </div>
                        <div class="col-sm-3 mb-1">
                            <table id="p_aadharCard" class="table filesList">
                            </table>
                        </div>    
                    </div>
                    <div class="Partnership_LLP" style="display: none;">
                        <div class="partner's_docs fs4" id="fs4-0">
                            <label style="font-weight: bold;">Partner 1</label>
                            <div class="row">
                                <div class="col-sm-3 mb-1">
                                    <label>PAN No.</label>
                                </div>
                                <div class="col-sm-3 mb-1">
                                    <input type="text" id="_fs1-0-pa_pan_no" disabled class="form-control"/> 
                                </div>
                                <div class="col-sm-3 mb-1">
                                    <input type="file" name="fs4-0-pa_pan_card" id="fs4-0-pa_pan_card" class="file" onchange="updateTable('fs4-0-pa_pan_card', 'fs4-0-pa_panCard', false)"/>
                                </div>
                                <div class="col-sm-3 mb-1">
                                    <table id="fs4-0-pa_panCard" class="table filesList">
                                    </table>
                                </div>
                                <div class="col-sm-3 mb-1">
                                    <label>Aadhar No.</label>
                                </div>
                                <div class="col-sm-3 mb-1">
                                    <input type="text" id="_fs1-0-pa_aadhar_no" disabled class="form-control"/> 
                                </div>
                                <div class="col-sm-3 mb-1">
                                    <input type="file" name="fs4-0-pa_aadhar_card" id="fs4-0-pa_aadhar_card" class="file" onchange="updateTable('fs4-0-pa_aadhar_card', 'fs4-0-pa_aadharCard', false)"/>
                                </div>
                                <div class="col-sm-3 mb-1">
                                    <table id="fs4-0-pa_aadharCard" class="table filesList">
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="Private_Limited_Company" style="display: none;">
                        <div class="row">
                            <div class="col-sm-3 mb-1">
                                <label>CIN No.</label>
                            </div>
                            <div class="col-sm-3 mb-1">
                                <input type="text" id="_cin_no" disabled class="form-control"/> 
                            </div>
                            <div class="col-sm-3 mb-1">
                                <input type="file" name="cin_doc" id="cin_doc" class="file" onchange="updateTable('cin_doc', 'cinDoc', false)"/>
                            </div>
                            <div class="col-sm-3 mb-1">
                                <table id="cinDoc" class="table filesList">
                                </table>
                            </div>
                        </div>
                        <div>
                            <div class="director's_docs fs5" id="fs5-0">
                                <label style="font-weight: bold;">Director 1</label>
                                <div class="row">
                                    <div class="col-sm-3 mb-1">
                                        <label>PAN No.</label>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <input type="text" id="_fs2-0-d_pan_no" disabled class="form-control"/> 
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <input type="file" name="fs5-0-d_pan_card" id="fs5-0-d_pan_card" class="file" onchange="updateTable('fs5-0-d_pan_card', 'fs5-0-d_panCard', false)"/>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <table id="fs5-0-d_panCard" class="table filesList">
                                        </table>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <label>Aadhar No.</label>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <input type="text" id="_fs2-0-d_aadhar_no" disabled class="form-control"/> 
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <input type="file" name="fs5-0-d_aadhar_card" id="fs5-0-d_aadhar_card" class="file" onchange="updateTable('fs5-0-d_aadhar_card', 'fs5-0-d_aadharCard', false)"/>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <table id="fs5-0-d_aadharCard" class="table filesList">
                                        </table>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <label>DIN No.</label>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <input type="text" id="_fs2-0-d_din_no" disabled class="form-control"/> 
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <input type="file" name="fs5-0-d_din_doc" id="fs5-0-d_din_doc" class="file" onchange="updateTable('fs5-0-d_din_doc', 'fs5-0-d_dinDoc', false)"/>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <table id="fs5-0-d_dinDoc" class="table filesList">
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="promoter's_docs fs6" id="fs6-0">
                                <label style="font-weight: bold;">Promoter 1</label>
                                <div class="row">
                                    <div class="col-sm-3 mb-1">
                                        <label>PAN No.</label>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <input type="text" id="_fs3-0-pr_pan_no" disabled class="form-control"/> 
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <input type="file" name="fs6-0-pr_pan_card" id="fs6-0-pr_pan_card" class="file" onchange="updateTable('fs6-0-pr_pan_card', 'fs6-0-pr_panCard', false)"/>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <table id="fs6-0-pr_panCard" class="table filesList">
                                        </table>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <label>Aadhar No.</label>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <input type="text" id="_fs3-0-pr_aadhar_no" disabled class="form-control"/> 
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <input type="file" name="fs6-0-pr_aadhar_card" id="fs6-0-pr_aadhar_card" class="file" onchange="updateTable('fs6-0-pr_aadhar_card', 'fs6-0-pr_aadharCard', false)"/>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <table id="fs6-0-pr_aadharCard" class="table filesList">
                                        </table>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <label>DIN No.</label>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <input type="text" id="_fs3-0-pr_din_no" disabled class="form-control"/> 
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <input type="file" name="fs6-0-pr_din_doc" id="fs6-0-pr_din_doc" class="file" onchange="updateTable('fs6-0-pr_din_doc', 'fs6-0-pr_dinDoc', false)"/>
                                    </div>
                                    <div class="col-sm-3 mb-1">
                                        <table id="fs6-0-pr_dinDoc" class="table filesList">
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>                                         
                    <input type="submit" onclick="return formValidation()" id="btn" class="btn btn-primary" name="Save" value="Save"/>
                    </form>
                </div>
            </div>
        </div>            
        <div class="modal-footer">

        </div>
    </div>
</div>

<table id="fancyTable" class="table fancyTable">
    <thead>
        <tr>
            <th>ORGANISATION</th>
            <th colspan="3">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for organisation in organisationDetails %}
        <tr>
            <td>
                <a href="#" onclick="showOrganisationData('/organisation_master/{{organisation.organisation_name}}')">{{ organisation.organisation_name }}</a>                
            </td>
            <td><a class="btn btn-primary" onclick="showOrganisationData('/organisation_master/{{organisation.organisation_name}}')">View</a></td>
            <td><a class="btn btn-primary" onclick="showOrganisationData('/organisation_master/{{organisation.organisation_name}}')"><i class="fa fa-fw fa-edit"></a></td>
            <td><button class="btn btn-danger"><i class="fa fa-fw fa-trash"></i></button></td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script type="text/javascript">
date = getMaxDate();
document.getElementById("estd_on").setAttribute("max", date);
document.getElementById("start_fin_yr").setAttribute("max", date);

function  copyToDoc(e) {
    id = e.target.id;
    val = e.target.value;

    document.getElementById("_" + id).value = val;
}

//partner 2 etc - null

//excel sheet

function validateEmail(email) {
    const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(String(email).toLowerCase());
}

function showLegalDetails(e){
    constitution = e.target.value;
    if(constitution == "Proprietorship"){
        $(".Proprietorship").show();        
        $(".Partnership_LLP").hide();
        $(".Private_Limited_Company").hide();
        
        $("#details_tab").text("Proprietor's Details")

    } else if(constitution == "Partnership" || constitution == "LLP"){
        $(".Proprietorship").hide();        
        $(".Partnership_LLP").show();
        $(".Private_Limited_Company").hide();

        $("#details_tab").text("Partner's Details")
    
    } else if(constitution == "Private Limited Company"){
        $(".Proprietorship").hide();        
        $(".Partnership_LLP").hide();
        $(".Private_Limited_Company").show();

        $("#details_tab").text("Director's Details")
    }
}

function cloneDetails(_id, classList){
    var no_partners = Number($("#"+ _id).val());
    classList.forEach ((className) =>
    {        
        var no_divs = document.getElementsByClassName(className).length;
        for(var i=1; i< (no_partners - no_divs + 1); i++){
            var div = document.getElementsByClassName(className)[0],
                clone = div.cloneNode(true);
            
            if(className.includes("partner")){
                text = "Partner "
            } else if(className.includes("director")){
                text = "Director "
            } else if(className.includes("promoter")){
                text = "Promoter "
            }

            clone.firstElementChild.innerText = text + (i + 1);    
            div.parentElement.appendChild(clone);
        }

        if(no_partners < no_divs){
            var n = no_divs - no_partners;
            var length = no_partners + n;

            divs = document.getElementsByClassName(className);
            var result = Object.keys(divs).map((key) => [Number(key), divs[key]]);
            for(var i = no_partners; i < length; i++){
                result[i][1].remove();
            }         
        }

        if(className.includes("_details")){
            children = document.getElementsByClassName(className)
            for(var i=0; i<children.length; i++){
                _class = children[i].classList[1];
                row = children[i].children[1];
                outer_id = _class + "-" + i;
                children[i].id = outer_id;
                els = row.children[0].children[0].children;
                for(var j=0; j<els.length; j++){
                    length = els[j].children.length;
                    input = els[j].children[length - 1];
                    parts = input.id.split("-");
                    id = outer_id + "-" + parts[2];
                    input.id = id;
                    input.name = id;
                }
            }
        }

        if(className.includes("_docs")){
            children = document.getElementsByClassName(className)
            for(var i=0; i<children.length; i++){
                _class = children[i].classList[1];
                row = children[i].children[1];
                outer_id = _class + "-" + i;
                children[i].id = outer_id;
                els = row.children;
                for(var j=0; j<els.length; j ++){
                    input = els[j].children[0];
                    if(input.tagName == "INPUT" || input.tagName == "TABLE"){
                        parts = input.id.split("-");
                        id = outer_id + "-" + parts[2];
                        if(input.name != undefined){
                            if(input.name.length > 0){
                                input.id = id;
                                input.name = id;
                                val = input.getAttribute("onchange");
                                if(val != null){                                    
                                    tmp = input.parentElement.nextElementSibling.firstElementChild.id;
                                    temp = outer_id + "-" + tmp.split("-")[2]
                                    input.setAttribute("onchange", "updateTable('" + id + "', '" + temp + "', false)");
                                }
                            } else{
                                input.id = input.id.split("-")[0] + "-" + id.split("-")[1] + "-" + input.id.split("-")[2];
                            }      
                        } else{
                            input.id = id;                            
                        }                                           
                    }                    
                }
            }
        }
    });
}

function formValidation(){
    if(!requiredValidation()){
        return false
    }

    email = $("#email").val();
    if (!validateEmail(email))
    {
        alert("Please enter  a valid email!");
        return false;
    }
            
    var pan_no = $("#pan_no").val();
    var regex = /[A-Z]{5}[0-9]{4}[A-Z]{1}$/;
    if(!regex.test(pan_no)){      
        alert("Please enter a valid pan no!");    
        return false;   
    }

    /*var tan_no = $("#tan_no").val();
    var regex = /^S4[0-9]{5}$^S1/;
    if(!regex.test(tan_no)){      
        alert("Please enter a valid tan no!");    
        return false;   
    }*/

    var gst_no = $("#gstin_no").val();
    if (gst_no.length > 0) {
        var regex = new RegExp("^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$");    
        if (!regex.test(gst_no)) {
            alert("Please enter a valid gst no!");       
            return false;    
        } 
    }

    /*var cin_no = $("#cin_no").val();
    var regex = ;
    if(!regex.test(cin_no)){      
        alert("Please enter a valid cin no!");    
        return false;   
    }*/

    if($("#p_aadhar_no").val().length > 0 && $("#p_aadhar_no").val().length < 12){
        alert("Please enter  a valid aadhar no.!");
        return false; 
    }

    els = $("input[id^='fs1-'][id$='-pa_pan_no']")
    for(let i=0; i < els.length; i++){
        if(els[i].value.length > 0){
            var regex = /[A-Z]{5}[0-9]{4}[A-Z]{1}$/;
            if(!regex.test(els[i].value)){      
                alert("Please enter a valid pan no!");    
                return false;   
            }
        }
    }

    els = $("input[id^='fs1-'][id$='-pa_aadhar_no']")
    for(let i=0; i < els.length; i++){
        if(els[i].value.length > 0){
            if(els[i].value.length < 12){
                alert("Please enter  a valid aadhar no.!");
                return false; 
            }
        }
    }   

    els = $("input[id^='fs1-'][id$='-d_pan_no']")
    for(let i=0; i < els.length; i++){
        if(els[i].value.length > 0){
            var regex = /[A-Z]{5}[0-9]{4}[A-Z]{1}$/;
            if(!regex.test(els[i].value)){      
                alert("Please enter a valid pan no!");    
                return false;   
            }
        }
    }
    
    els = $("input[id^='fs1-'][id$='-d_aadhar_no']")
    for(let i=0; i < els.length; i++){
        if(els[i].value.length > 0){
            if(els[i].value.length < 12){
                alert("Please enter  a valid aadhar no.!");
                return false; 
            }
        }
    }
    
    els = $("input[id^='fs1-'][id$='-d_din_no']")
    for(let i=0; i < els.length; i++){

    }

    els = $("input[id^='fs1-'][id$='-pr_pan_no']")
    for(let i=0; i < els.length; i++){
        if(els[i].value.length > 0){
            var regex = /[A-Z]{5}[0-9]{4}[A-Z]{1}$/;
            if(!regex.test(els[i].value)){      
                alert("Please enter a valid pan no!");    
                return false;   
            }
        }
    }
    
    els = $("input[id^='fs1-'][id$='-pr_aadhar_no']")
    for(let i=0; i < els.length; i++){
        if(els[i].value.length > 0){
            if(els[i].value.length < 12){
                alert("Please enter  a valid aadhar no.!");
                return false; 
            }
        }
    }

    els = $("input[id^='fs1-'][id$='-pr_din_no']")
    for(let i=0; i < els.length; i++){

    }

    // IF EXISTS
    exists = false;
    if($("#btn").val() == "Save"){
        dt = [
            { "organisation_name": $("#organisation_name").val() }
        ]

        ifExists("Settings", "OrganisationMaster", dt).done(function(response){
            exists = response["result"];
        });

        if(exists){
            alert("Data for this organisation already exists!")
            return false;
        }
    }

    alert("Data saved sucessfully!");
    return true;
}

</script>

{% endblock content %}